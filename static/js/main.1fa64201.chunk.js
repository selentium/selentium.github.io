(this["webpackJsonpreddit-pics"]=this["webpackJsonpreddit-pics"]||[]).push([[0],{19:function(e,t,n){e.exports=n(33)},33:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(4),c=n.n(s),o=n(12),i=n(13),u=n(18),d=n(17),l=n(7),m=n(15),p=n(5),b=n(3),f=n.n(b),h=n(6),v=n(2),g=(n(31),function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,fetch("https://www.reddit.com/r/".concat(t,".json?after=").concat(n));case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,fetch("https://www.reddit.com/r/".concat(t,".json"));case 8:r=e.sent;case 9:return e.next=11,r.json();case 11:return r=e.sent,a=(a=r.data.children.map((function(e){return(e=e.data).hasOwnProperty("preview")?e.preview.images[0].source.url.includes("https://external-preview.redd.it/")?null:{subreddit:t,title:e.title,source_image:e.preview.images[0].source,image_resolutions:e.preview.images[0].resolutions,author:e.author,permalink:e.permalink,id:e.id}:null}))).filter((function(e){return null!=e})),e.abrupt("return",{posts:a,before:r.data.before,after:r.data.after,subreddit:t});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=["EarthPorn","naturepics","LandscapePhotography","natureporn"],S=Object(v.b)("fetchPosts",function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"==typeof t?(r=t.subredditName,a=t.after):r=t,e.next=3,g(r,a);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(v.c)({name:"posts",initialState:{posts:[],cursors:{},currentIndex:-1},reducers:{next:function(e,t){e.currentIndex+1<=e.posts.length-1&&++e.currentIndex},prev:function(e,t){e.currentIndex>0&&--e.currentIndex},removeSubreddit:function(e,t){e.posts=e.posts.filter((function(e){return e.subreddit!=t.payload})),0==e.posts.length&&(e.currentIndex=-1),e.currentIndex>e.posts.length-1&&(e.currentIndex=e.posts.length-1)}},extraReducers:Object(p.a)({},S.fulfilled,(function(e,t){e.posts=e.posts.concat(t.payload.posts),e.cursors[t.payload.subreddit]={before:t.payload.before,after:t.payload.after},-1==e.currentIndex&&(e.currentIndex=0)}))}),P=function(e){return e.posts.currentIndex>0},w=function(e){return e.posts.currentIndex+1<=e.posts.posts.length-1},y=function(e){return e.posts.posts.length-1-e.posts.currentIndex<=5},N=function(e){if(-1==e.posts.currentIndex)return!0;for(var t in e.posts.cursors)if(e.posts.cursors[t].after)return!0;return!1},k=function(e){return-1==e.posts.currentIndex?null:e.posts.posts.length-1>=e.posts.currentIndex?e.posts.posts[e.posts.currentIndex]:null},O=function(e){if(!e)return e;(e=Object(m.a)({},e)).subredditURL="https://www.reddit.com/r/"+e.subreddit,e.permalink="https://www.reddit.com"+e.permalink,e.authorURL="https://www.reddit.com/user/"+e.author+"/";var t=e.image_resolutions[e.image_resolutions.length-1].url;return t=t.replace(/&amp;/g,"&"),e.imageSrc=t,e},j=Object(v.c)({name:"subreddits",initialState:{subreddits:["EarthPorn","naturepics","LandscapePhotography","natureporn"],settingsOpen:!1},reducers:{addSubreddit:function(e,t){var n=t.payload;E.includes(n)&&!e.subreddits.includes(n)&&e.subreddits.push(n)},removeSubreddit:function(e,t){var n=t.payload,r=e.subreddits.indexOf(n);-1!=r&&e.subreddits.splice(r,1)},openSettings:function(e,t){e.settingsOpen=!0},closeSettings:function(e,t){e.settingsOpen=!1}}}),I=E,C=function(e){return e.subreddits.subreddits.length>1},F=function(e){var t,n,r=e.currentPost,s=e.hasPrevPost,c=e.hasNextPost,o=e.nextPost,i=e.prevPost;return s&&(t=a.a.createElement("div",{className:"p-2"},a.a.createElement("button",{onClick:function(e){e.preventDefault(),i(),document.querySelector("#image-title").scrollIntoView({behavior:"smooth"})},className:"btn ntn-sm btn-success"},"\xab"))),c&&(n=a.a.createElement("div",{className:"p-2"},a.a.createElement("button",{onClick:function(e){e.preventDefault(),o(),document.querySelector("#image-title").scrollIntoView({behavior:"smooth"})},className:"btn ntn-sm btn-success"},"\xbb"))),a.a.createElement("div",{className:"p-2"},a.a.createElement("h4",{id:"image-title"},a.a.createElement("a",{href:r.permalink},r.title)),a.a.createElement("p",{className:"meta"},"From ",a.a.createElement("a",{href:r.subredditURL},"r/",r.subreddit)," by ",a.a.createElement("a",{href:r.authorURL},"u/",r.author)),a.a.createElement("div",{className:"d-flex justify-content-center"},t,n),a.a.createElement("div",{className:"d-flex justify-content-center"},a.a.createElement("a",{href:r.permalink},a.a.createElement("img",{className:"img-fluid",title:r.title,alt:r.title,src:r.imageSrc}))),a.a.createElement("div",{className:"d-flex justify-content-center"},t,n))};function R(e){var t=e.subreddits,n=e.availableSubreddits,r=e.settingsOpen,s=e.closeSettings,c=e.addSubreddit,o=e.removeSubreddit,i=e.removeSubredditFromPosts,u=e.canRemoveSubreddit,d=r?"block":"none",l=n.map((function(e){var n="checkbox-"+e,r=t.includes(e)?"checked":"",s="";"checked"!=r||u||(s="disabled");return a.a.createElement("div",{className:"form-check",key:e},a.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:r,disabled:s,onChange:function(t){return function(e,t){e.target.checked?c(t):(o(t),i(t))}(t,e)},id:n}),a.a.createElement("label",{className:"form-check-label",htmlFor:n},e))}));return a.a.createElement("div",{className:"modal",tabIndex:-1,role:"dialog",style:{display:d}},a.a.createElement("div",{className:"modal-dialog",role:"document"},a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"modal-header"},a.a.createElement("h5",{className:"modal-title"},"Chose subreddits"),a.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(e){return s(e)}},a.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),a.a.createElement("div",{className:"modal-body"},a.a.createElement("form",null,l)),a.a.createElement("div",{className:"modal-footer"},a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){return s()}},"Save changes")))))}var L=function(e){var t;return e.currentPost&&(t=a.a.createElement(F,{currentPost:e.currentPost,hasPrevPost:e.hasPrevPost,hasNextPost:e.hasNextPost,nextPost:e.nextPost,prevPost:e.prevPost})),a.a.createElement("div",null,a.a.createElement("header",null,a.a.createElement("nav",{className:"navbar navbar-light bg-light"},a.a.createElement("span",{className:"navbar-brand"},"Nature Pics"),a.a.createElement("ul",{className:"navbar-nav"},a.a.createElement("li",{className:"nav-item"},a.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.openSettings()}},"Settings"))))),a.a.createElement("div",{className:"row justify-content-center align-items-center"},a.a.createElement("div",{className:"col-8"},a.a.createElement("div",{className:"d-flex justify-content-center"},t))),a.a.createElement(R,{subreddits:e.subreddits,availableSubreddits:e.availableSubreddits,settingsOpen:e.settingsOpen,canRemoveSubreddit:e.canRemoveSubreddit,closeSettings:function(){return e.closeSettings()},addSubreddit:function(t){return e.addSubreddit(t)},removeSubreddit:function(t){return e.removeSubreddit(t)},removeSubredditFromPosts:function(t){return e.removeSubredditFromPosts(t)}}))},D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"fetchAll",value:function(){for(var e=0;e<this.props.subreddits.length;++e)this.props.fetchPosts(this.props.subreddits[e])}},{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"componentDidUpdate",value:function(){this.props.needToFetch&&this.fetchAll()}},{key:"render",value:function(){return a.a.createElement(L,this.props)}}]),n}(r.Component),U=Object(l.b)((function(e){return{subreddits:e.subreddits.subreddits,availableSubreddits:I,settingsOpen:e.subreddits.settingsOpen,canRemoveSubreddit:C(e),hasPrevPost:P(e),hasNextPost:w(e),needToFetch:y(e),canFetch:N(e),currentPost:O(k(e))}}),(function(e){return{nextPost:function(){return e(x.actions.next())},prevPost:function(){return e(x.actions.prev())},fetchPosts:function(t){return e(S(t))},removeSubredditFromPosts:function(t){return e(x.actions.removeSubreddit(t))},addSubreddit:function(t){return e(j.actions.addSubreddit(t))},removeSubreddit:function(t){return e(j.actions.removeSubreddit(t))},openSettings:function(){return e(j.actions.openSettings())},closeSettings:function(){return e(j.actions.closeSettings())},toggleSubreddit:function(t){return e(j.actions.toggleSubreddit,t)}}}))(D),_=n(16),A=n(1),q=Object(A.c)({posts:x.reducer,subreddits:j.reducer}),B=Object(_.a)(Object(v.d)()),J=Object(v.a)({reducer:q,middleware:B});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(32);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(l.a,{store:J},a.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.1fa64201.chunk.js.map